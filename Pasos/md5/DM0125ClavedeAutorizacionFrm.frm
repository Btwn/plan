[Forma]
Clave=DM0125ClavedeAutorizacionFrm
Nombre=DM0125 Validación de usuario
Icono=357
Modulos=(Todos)
ListaCarpetas=Login
CarpetaPrincipal=Login
PosicionInicialIzquierda=456
PosicionInicialArriba=419
PosicionInicialAlturaCliente=140
PosicionInicialAncho=367
VentanaTipoMarco=Sencillo
VentanaPosicionInicial=Centrado
VentanaBloquearAjuste=S
VentanaEstadoInicial=Normal
AccionesTamanoBoton=15x5
ListaAcciones=Validar<BR>Cerrar
AccionesCentro=S
BarraAcciones=S
ExpresionesAlMostrar=Asigna(Mavi.DM0125Usuario,<T><T>)<BR>Asigna(Mavi.DM0125Contrasena,<T><T>)
[Login]
Estilo=Ficha
Clave=Login
AlineacionAutomatica=S
AcomodarTexto=S
MostrarConteoRegistros=S
Zona=A1
Vista=(Variables)
Fuente={Tahoma, 8, Negro, []}
FichaEspacioEntreLineas=11
FichaEspacioNombres=90
FichaColorFondo=Plata
CampoColorLetras=Negro
CampoColorFondo=Blanco
ListaEnCaptura=Mavi.DM0125Usuario<BR>Mavi.DM0125Contrasena
CarpetaVisible=S
FichaNombres=Izquierda
FichaAlineacion=Centrado
PermiteEditar=S
[Login.Mavi.DM0125Usuario]
Carpeta=Login
Clave=Mavi.DM0125Usuario
Editar=S
LineaNueva=S
ValidaNombre=S
3D=S
Tamano=20
ColorFondo=Blanco
ColorFuente=Negro
[Login.Mavi.DM0125Contrasena]
Carpeta=Login
Clave=Mavi.DM0125Contrasena
Editar=S
LineaNueva=S
ValidaNombre=S
3D=S
Tamano=20
ColorFondo=Blanco
ColorFuente=Negro
[Acciones.validar.Asignar]
Nombre=Asignar
Boton=0
TipoAccion=Controles Captura
ClaveAccion=Variables Asignar
Activo=S
Visible=S
[Acciones.validar.Expresion]
Nombre=Expresion
Boton=0
TipoAccion=Expresion
Expresion=Si<BR>   Vacio(Mavi.DM0125Usuario)<BR>Entonces<BR>    Informacion(<T>EL CAMPO USUARIO ESTA VACIO<T>)<BR>    AbortarOperacion<BR>Sino<BR>    Si<BR>        Vacio(Mavi.DM0125Contrasena)<BR>    Entonces<BR>        Informacion(<T>EL CAMPO CONTRASEÑA ESTA VACIO<T>)<BR>        AbortarOperacion<BR>    Sino<BR>        Si<BR>            SQL(<T>SELECT U.Contrasena FROM usuario U<BR>INNER JOIN TablaStD T ON T.Nombre=U.Acceso WHERE Usuario=<T>+Comillas(Mavi.DM0125Usuario)) = MD5(Mavi.DM0125Contrasena,<T>p<T>)<BR>        Entonces<BR>             Verdadero<BR><BR>        Sino<BR>             Error(<T>USUARIO O CONTRASEÑA INCORRECTOS<T>)<BR>             AbortarOperacion<BR>        Fin<BR>    Fin<BR>Fin
Activo=S
Visible=S
[Acciones.validar.cerrar]
Nombre=cerrar
Boton=0
TipoAccion=Ventana
ClaveAccion=Cerrar
Activo=S
Visible=S
[Acciones.Cerrar]
Nombre=Cerrar
Boton=36
NombreEnBoton=S
NombreDesplegar=Cerrar
EnBarraHerramientas=S
TipoAccion=Ventana
ClaveAccion=Cerrar
Activo=S
Visible=S
EnBarraAcciones=S
Antes=S
AntesExpresiones=Asigna(Mavi.DM0125Bandera,<T>VERDADERO<T>)
[Acciones.Validar.Asigna]
Nombre=Asigna
Boton=0
TipoAccion=Controles Captura
ClaveAccion=Variables Asignar
Activo=S
Visible=S
[Acciones.Validar.Expre]
Nombre=Expre
Boton=0
TipoAccion=Expresion
Activo=S
Visible=S
Expresion=Si<BR>   Vacio(Mavi.DM0125Usuario)<BR>Entonces<BR>    Informacion(<T>El campo usuario esta vacio<T>)<BR>    AbortarOperacion<BR>Sino<BR>    Si<BR>        Vacio(Mavi.DM0125Contrasena)<BR>    Entonces<BR>        Informacion(<T>El campo contraseña esta vacio<T>)<BR>        AbortarOperacion<BR>    Sino<BR>        Si<BR>            SQL(<T>SELECT Contrasena FROM Usuario WHERE Usuario=<T>+Comillas(Mavi.DM0125Usuario)) = MD5(Mavi.DM0125Contrasena,<T>p<T>)<BR>        Entonces<BR>             Si<BR>                SQL(<T>SELECT U.Contrasena FROM Usuario U INNER JOIN TablaStD D ON U.ACCESO=D.NOMBRE WHERE D.TablaSt =<T>+Comillas(<T>QUITAR ORDEN EMBARQUES<T>)<BR>                +<T>And U.Estatus=<T>+comillas(<T>Alta<T>) +<T> AND U.Usuario=<T>+Comillas(Mavi.DM0125Usuario)) = MD5(Mavi.DM0125Contrasena,<T>p<T>)<BR>      <CONTINUA>
Expresion002=<CONTINUA>      Entonces<BR>                EjecutarSQL(<T>spEmbarqueDesAsignar :nEstacion, :nID, :nAntecedenteID<T>, EstacionTrabajo, Info.ID, Info.AntecedenteID)<BR>                Asigna(Mavi.DM0125Bandera,<T>FALSO<T>)<BR>                INFORMACION(<T>Validación correcta, puede continuar...<T>)<BR>                Otraforma(<T>EmbarqueAsignar<T>,ActualizarForma)<BR>          Sino<BR>                Error(<T>El usuario no tiene permisos para quitar ordenes del embarque. Llamar a un Gerente.<T>)<BR>                AbortarOperacion<BR>            Fin<BR>        Sino<BR>             Error(<T>Usuario ó Contraseña Incorrectos<T>)<BR>             AbortarOperacion<BR>        Fin<BR>    Fin<BR>Fin
[Acciones.Validar.Cerr]
Nombre=Cerr
Boton=0
TipoAccion=Ventana
ClaveAccion=Cerrar
Activo=S
Visible=S
[Acciones.Validar]
Nombre=Validar
Boton=29
NombreDesplegar=Validar
Multiple=S
ListaAccionesMultiples=Asigna<BR>Expre<BR>Cerr
TipoAccion=Expresion
NombreEnBoton=S
BtnResaltado=S
EnBarraAcciones=S
Activo=S
Visible=S


