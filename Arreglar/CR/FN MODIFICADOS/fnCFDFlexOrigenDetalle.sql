SET DATEFIRST 7
SET ANSI_NULLS OFF
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
SET LOCK_TIMEOUT -1
SET QUOTED_IDENTIFIER OFF
SET NOCOUNT ON
SET IMPLICIT_TRANSACTIONS OFF
GO
ALTER FUNCTION fnCFDFlexOrigenDetalle (@ID int)
RETURNS varchar(20)

AS BEGIN
DECLARE
@OID			int,
@OEmpresa		char(5),
@OMov			varchar(20),
@OMovID			varchar(20)
SELECT @OMov = d.Aplica, @OMovID = d.AplicaID, @OEmpresa = c.Empresa FROM CXCD d WITH (NOLOCK) JOIN CXC c WITH (NOLOCK) ON d.ID = c.ID WHERE d.ID = @ID
SELECT @OID = ID FROM CXC WITH (NOLOCK) WHERE @OMov = Mov AND @OMovID = MovID AND @OEmpresa = Empresa
RETURN(@OMov)
END

